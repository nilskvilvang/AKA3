<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>11.knit</title>

  
   
   <meta name="generator" content="placeholder" />
  <meta property="og:title" content="11.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="11.knit" />
  
  
  
  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script>
    <script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet" />
    <script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script>
    <script src="libs/bs3compat-0.3.1/transition.js"></script>
    <script src="libs/bs3compat-0.3.1/tabs.js"></script>
    <script src="libs/bs3compat-0.3.1/bs3compat.js"></script>
    <link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet" />
    <script src="libs/bs4_book-1.0.0/bs4_book.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script>

  <!-- CSS -->
  <style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
    <style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
      <link rel="stylesheet" href="style.css" />
  
</head>

<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<!--bookdown:title:start-->
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book">
    <a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title=""></a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
      </form>

      <nav aria-label="Table of contents">
        <h2>Table of contents</h2>
        <div id="book-toc"></div>

        <div class="book-extra">
          <p><a id="book-repo" href="#">View book source <i class="fab fa-github"></i></a></li></p>
        </div>
      </nav>
    </div>
  </header>

  <main class="col-sm-12 col-md-9 col-lg-7" id="content">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<div id="polynomisk-regresjon" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Polynomisk regresjon</h1>
<p>R-pakker brukt i dette kapittelet:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, readxl)</span></code></pre></div>
<p>Anta at vi har lønnsdata fra en bedrift som har regnet ut snittlønn for de 10 stillingskategoriene de har av ansatte.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>polydata <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;polydata.xlsx&quot;</span>)</span></code></pre></div>
<p><a href="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,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" download="polydata.xlsx">Download polydata.xlsx</a></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(polydata)</span></code></pre></div>
<pre><code>## Rows: 10
## Columns: 2
## $ Stillingskategori &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10
## $ Snittlonn         &lt;dbl&gt; 35000, 41000, 48000, 63000, 88000, 120000, 165000, 2…</code></pre>
<p>Vi kan se på disse dataene og se en klar ikke-lineær trend:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>enkelOLS <span class="ot">&lt;-</span> <span class="fu">lm</span>(Snittlonn <span class="sc">~</span> Stillingskategori, <span class="at">data =</span> polydata)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> polydata<span class="sc">$</span>Stillingskategori, <span class="at">y =</span> polydata<span class="sc">$</span>Snittlonn), <span class="at">col =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;Stillingskategori&quot;</span>) <span class="sc">+</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;Gjennomsnittslonn&quot;</span>) <span class="sc">+</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">caption =</span> <span class="st">&quot;Ikke-linear forhold mellom stillingskategori og snittlonn&quot;</span>)</span></code></pre></div>
<p><img src="11_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Vi kunne kanskje ane dette ut fra dataene (og fordi det selvsagt er et eksempel der vanlig lineær regresjon ikke skal funke så bra…). Det synes i hvert fall klart at den lineære regresjonslinja sannsynligvis er en dårlig modell for lønnsdataene.</p>
<p>Fra kapittelet om enkel, lineær regresjon vet vi at vi kan uttrykke regresjonslinja slik:</p>
<p><span class="math inline">\(y=\alpha + \beta x\)</span></p>
<p>Vi kan videre uttrykke en multippel regresjon slik:</p>
<p><span class="math inline">\(y=\alpha + \beta_1x_1 + \beta_2x_2 +\ ...\ +\beta_nx_n\)</span></p>
<p>En polynomisk regresjonslikning likner, men her introduserer vi “i n-te ledd”:</p>
<p><span class="math inline">\(y=\alpha + \beta_1x_1 + \beta_2x_1^2+\ ...\ +\beta_nx_1^n\)</span></p>
<p>Selv om dette sikkert er kjent er det greit å illustrere ulike n’te-ledd grafisk:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>funksjonsgrafer <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">5</span>, <span class="dv">5</span>)), <span class="fu">aes</span>(<span class="at">x =</span> x)) <span class="sc">+</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">stat_function</span>(<span class="at">fun =</span> <span class="cf">function</span>(x){x<span class="sc">^</span><span class="dv">4</span>}, <span class="at">color=</span><span class="st">&quot;red&quot;</span>, <span class="at">lwd =</span> <span class="dv">1</span>) <span class="sc">+</span>        </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">stat_function</span>(<span class="at">fun =</span> <span class="cf">function</span>(x){x<span class="sc">^</span><span class="dv">3</span>}, <span class="at">color=</span><span class="st">&quot;blue&quot;</span>, <span class="at">lwd =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">stat_function</span>(<span class="at">fun =</span> <span class="cf">function</span>(x){<span class="dv">4</span><span class="sc">*</span>x<span class="sc">^</span><span class="dv">2</span>}, <span class="at">color=</span><span class="st">&quot;orange&quot;</span>, <span class="at">lwd =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">stat_function</span>(<span class="at">fun =</span> <span class="cf">function</span>(x){<span class="dv">10</span><span class="sc">*</span>x}, <span class="at">color=</span><span class="st">&quot;purple&quot;</span>, <span class="at">lwd =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Quartic&quot;</span>, <span class="at">x =</span> <span class="sc">-</span><span class="dv">4</span>, <span class="at">y =</span> <span class="dv">200</span>, <span class="at">size =</span> <span class="dv">5</span>) <span class="sc">+</span> </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Quadratic&quot;</span>, <span class="at">x =</span> <span class="sc">-</span><span class="fl">4.6</span>, <span class="at">y =</span> <span class="dv">107</span>, <span class="at">size =</span><span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Cubic&quot;</span>, <span class="at">x =</span> <span class="sc">-</span><span class="fl">3.8</span>, <span class="at">y =</span> <span class="sc">-</span><span class="dv">90</span>, <span class="at">size =</span><span class="dv">5</span>) <span class="sc">+</span> </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>            <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Linear&quot;</span>, <span class="at">x =</span> <span class="sc">-</span><span class="fl">4.6</span>, <span class="at">y =</span> <span class="sc">-</span><span class="dv">32</span>, <span class="at">size =</span><span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>            <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ylim</span>(<span class="sc">-</span><span class="dv">100</span>, <span class="dv">200</span>)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>funksjonsgrafer</span></code></pre></div>
<p><img src="11_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>Imidlertid er vi sjeldent interessert i negative x-verdier i praktisk bruk (matematisk er det selvsagt interessant, men som sagt sjeldent i anvendt analyse som vi driver med).</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>funksjonsgrafer2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>)), <span class="fu">aes</span>(<span class="at">x =</span> x)) <span class="sc">+</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">stat_function</span>(<span class="at">fun =</span> <span class="cf">function</span>(x){x<span class="sc">^</span><span class="dv">4</span>}, <span class="at">color=</span><span class="st">&quot;red&quot;</span>, <span class="at">lwd =</span> <span class="dv">1</span>) <span class="sc">+</span>        </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">stat_function</span>(<span class="at">fun =</span> <span class="cf">function</span>(x){x<span class="sc">^</span><span class="dv">3</span>}, <span class="at">color=</span><span class="st">&quot;blue&quot;</span>, <span class="at">lwd =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">stat_function</span>(<span class="at">fun =</span> <span class="cf">function</span>(x){<span class="dv">4</span><span class="sc">*</span>x<span class="sc">^</span><span class="dv">2</span>}, <span class="at">color=</span><span class="st">&quot;orange&quot;</span>, <span class="at">lwd =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">stat_function</span>(<span class="at">fun =</span> <span class="cf">function</span>(x){<span class="dv">10</span><span class="sc">*</span>x}, <span class="at">color=</span><span class="st">&quot;purple&quot;</span>, <span class="at">lwd =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>            <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Quartic&quot;</span>, <span class="at">x =</span> <span class="fl">4.2</span>, <span class="at">y =</span> <span class="dv">200</span>, <span class="at">size =</span> <span class="dv">5</span>) <span class="sc">+</span> </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Quadratic&quot;</span>, <span class="at">x =</span> <span class="fl">4.8</span>, <span class="at">y =</span> <span class="dv">75</span>, <span class="at">size =</span><span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Cubic&quot;</span>, <span class="at">x =</span> <span class="fl">4.5</span>, <span class="at">y =</span> <span class="dv">120</span>, <span class="at">size =</span><span class="dv">5</span>) <span class="sc">+</span> </span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>            <span class="fu">annotate</span>(<span class="at">geom=</span><span class="st">&quot;text&quot;</span>, <span class="at">label =</span> <span class="st">&quot;Linear&quot;</span>, <span class="at">x =</span> <span class="fl">4.8</span>, <span class="at">y =</span> <span class="dv">40</span>, <span class="at">size =</span><span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>            <span class="fu">geom_vline</span>(<span class="at">xintercept=</span><span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ylim</span>(<span class="sc">-</span><span class="dv">100</span>, <span class="dv">200</span>) <span class="sc">+</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>            <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">5</span>)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>funksjonsgrafer2</span></code></pre></div>
<p><img src="11_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>Vi skal nedenfor vise hvordan vi kan utvikle polynomisk regresjon, men det er på sin plass å komme med en liten advarsel. Vi kan, som nevnt, i prinsippet ha så mange med så mange ledd vi vil, og muligens vil vi få bedre og bedre “fit” til dataene jo flere vi legger til. Det betyr imidlertid ikke at modellen blir bedre og bedre til å predikere framtidige verdier. Vi kan få det vi kaller overtilpasning (“overfitting”), dvs at modellen vår passer helt utmerket til dataene våre, men at modellen ikke vil klare å predikere nye verdier med særlig god treffsikkerhet. Det er alltid en avveining mellom å få en modell som er godt tilpasset dataene, predikativ evne og modellens kompleksitet/enkelhet (alt annet likt foretrekker vi som regel enklere modeller framfor komplekse modeller). Vi skal altså alltid være bevisst på hva vi gjør i polynomisk regresjon (som med alt annet selvsagt…).</p>
<p>Et annet punkt, som forsåvidt også gjelder andre modeller, er at vi skal være klar over i hvilket område - x-verdier - modellen kan sies å være gyldig. Som vi ser av grafene ovenfor er det tildels store forskjeller i hva modellene vil predikere, og valg av modell må ses i sammenheng med det området vi har observasjoner og hvilket område vi ønsker å predikere i. Vi skal være ekstra observante når vi tenker på å gjøre prediksjoner i områder vi ikke har modellert, eller i områder vi ikke har hatt data på når vi har modellert.</p>
<div id="modellering-av-andregrads-quadratic-polynomisk-regresjon" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Modellering av andregrads (“quadratic”) polynomisk regresjon</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>polydata<span class="sc">$</span>Stillingskategori2 <span class="ot">&lt;-</span> polydata<span class="sc">$</span>Stillingskategori<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(polydata)</span></code></pre></div>
<pre><code>## Rows: 10
## Columns: 3
## $ Stillingskategori  &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10
## $ Snittlonn          &lt;dbl&gt; 35000, 41000, 48000, 63000, 88000, 120000, 165000, …
## $ Stillingskategori2 &lt;dbl&gt; 1, 4, 9, 16, 25, 36, 49, 64, 81, 100</code></pre>
<p>Vi har altså laget en kvadrert variabel som heter Stillingskategori2. Lager så polynomial modell med ^2 ledd:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>poly_reg2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Snittlonn <span class="sc">~</span> ., <span class="at">data =</span> polydata)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> polydata<span class="sc">$</span>Stillingskategori, <span class="at">y =</span> polydata<span class="sc">$</span>Snittlonn), <span class="at">col =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> polydata<span class="sc">$</span>Stillingskategori, <span class="at">y =</span> <span class="fu">predict</span>(poly_reg2, <span class="at">newdata =</span> polydata)), <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Polynomial regression ^2&quot;</span>) <span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;Stillingskategori&quot;</span>) <span class="sc">+</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;Snittlønn&quot;</span>)</span></code></pre></div>
<p><img src="11_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="modellering-av-tredjegrads-cubic-polynomisk-regresjon" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Modellering av tredjegrads (“cubic”) polynomisk regresjon</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>polydata<span class="sc">$</span>Stillingskategori3 <span class="ot">&lt;-</span> polydata<span class="sc">$</span>Stillingskategori<span class="sc">^</span><span class="dv">3</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(polydata)</span></code></pre></div>
<pre><code>## Rows: 10
## Columns: 4
## $ Stillingskategori  &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10
## $ Snittlonn          &lt;dbl&gt; 35000, 41000, 48000, 63000, 88000, 120000, 165000, …
## $ Stillingskategori2 &lt;dbl&gt; 1, 4, 9, 16, 25, 36, 49, 64, 81, 100
## $ Stillingskategori3 &lt;dbl&gt; 1, 8, 27, 64, 125, 216, 343, 512, 729, 1000</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>polydata<span class="sc">$</span>Stillingskategori3 <span class="ot">&lt;-</span> polydata<span class="sc">$</span>Stillingskategori<span class="sc">^</span><span class="dv">3</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>poly_reg3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Snittlonn <span class="sc">~</span> ., <span class="at">data =</span> polydata)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> polydata<span class="sc">$</span>Stillingskategori, <span class="at">y =</span> polydata<span class="sc">$</span>Snittlonn), <span class="at">col =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> polydata<span class="sc">$</span>Stillingskategori, <span class="at">y =</span> <span class="fu">predict</span>(poly_reg3, <span class="at">newdata =</span> polydata)), <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Polynomial regression ^3&quot;</span>) <span class="sc">+</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;Stillingskategori&quot;</span>) <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;Snittlønn&quot;</span>)</span></code></pre></div>
<p><img src="11_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
<div id="modellering-av-fjerdegrads-quartic-polynomisk-regresjon" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Modellering av fjerdegrads (“quartic”) polynomisk regresjon</h2>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>polydata<span class="sc">$</span>Stillingskategori4 <span class="ot">&lt;-</span> polydata<span class="sc">$</span>Stillingskategori<span class="sc">^</span><span class="dv">4</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>poly_reg4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Snittlonn <span class="sc">~</span> ., <span class="at">data =</span> polydata)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> polydata<span class="sc">$</span>Stillingskategori, <span class="at">y =</span> polydata<span class="sc">$</span>Snittlonn), <span class="at">col =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> polydata<span class="sc">$</span>Stillingskategori, <span class="at">y =</span> <span class="fu">predict</span>(poly_reg4, <span class="at">newdata =</span> polydata)), <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Polynomial regression ^4&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;Stillingskategori&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;Snittlønn&quot;</span>)</span></code></pre></div>
<p><img src="11_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
</div>
<div id="tolkning" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Tolkning</h2>
<p>Av grafene over får vi en indikasjon på hvilken modell som ser ut til å passe våre data best. Vi kan også se på hvordan de ulike modellene predikerer ulikt. La oss f.eks. anta at man ønsker å innføre en stillingskategori 5.5. Hva er predikert snittlønn for denne kategorien?</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Enkel OLS</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>pred1 <span class="ot">&lt;-</span> <span class="fu">predict</span>(enkelOLS, <span class="fu">data.frame</span>(<span class="at">Stillingskategori =</span> <span class="fl">5.5</span>))</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ^4 polynomial</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>pred2 <span class="ot">&lt;-</span> <span class="fu">predict</span>(poly_reg4, <span class="fu">data.frame</span>(<span class="at">Stillingskategori =</span> <span class="fl">5.5</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Stillingskategori2 =</span> <span class="fl">5.5</span><span class="sc">^</span><span class="dv">2</span>,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Stillingskategori3 =</span> <span class="fl">5.5</span><span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                              <span class="at">Stillingskategori4 =</span> <span class="fl">5.5</span><span class="sc">^</span><span class="dv">4</span>))</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">c</span>(pred1, pred2))</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>pred</span></code></pre></div>
<pre><code>##   c(pred1, pred2)
## 1          224500
## 2          110250</code></pre>
<p>Vi kan se at det er en vesentlig forskjell i prediksjonene. Når vi ser på grafen for enkel OLS lenger opp ser vi også at regresjonslinja ligger godt over linja/punktene for dataene. Den siste av grafene - polynomial ^4 - ser ut til å treffe ganske bra.</p>
</div>
<div id="tilnæmring-gjennom-kryssvalidering---valg-av-antall-grader-i-polynomialfunksjonen" class="section level2" number="1.5">
<h2><span class="header-section-number">1.5</span> Tilnæmring gjennom kryssvalidering - valg av antall grader i polynomialfunksjonen</h2>
<p>Dette eksempelet er modifisert fra <span class="citation">Zach (2019)</span>.</p>
<p>Vi kan tilnærme oss valg av riktig polynomialfunksjon gjennom “Mean Squared Error” (MSE) som forteller oss hvor nærme en regresjonslinje er datapunktene. Jo lavere MSE, jo bedre kan vi anta prediksjonsevnen til modellen er. Vi skal ikke gå i dybden på dette, men vise hvordan dette kan se ut for eksempelet ovenfor. I eksempelet brukes det som kalles “k-fold cross-validation” som vi ikke går nærmere inn på (men som vi forklarte i kapittelet om Principal Component Analysis). Utregning av MSE følger av:</p>
<p><span class="math inline">\(MSE = \frac{1}{n}*\sum(faktisk\ verdi - predikert\ verdi)\)</span></p>
<p>I eksempelet har vi generert data som ser på timer studenter har brukt på et emne og respektive resultater.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">timer =</span> <span class="fu">runif</span>(<span class="dv">50</span>, <span class="dv">5</span>, <span class="dv">15</span>), <span class="at">resultat=</span><span class="dv">50</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>resultat <span class="ot">&lt;-</span> df<span class="sc">$</span>resultat <span class="sc">+</span> df<span class="sc">$</span>timer<span class="sc">^</span><span class="dv">3</span><span class="sc">/</span><span class="dv">150</span> <span class="sc">+</span> df<span class="sc">$</span>timer<span class="sc">*</span><span class="fu">runif</span>(<span class="dv">50</span>, <span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(df)</span></code></pre></div>
<pre><code>## Rows: 50
## Columns: 2
## $ timer    &lt;dbl&gt; 7.655087, 8.721239, 10.728534, 14.082078, 7.016819, 13.983897…
## $ resultat &lt;dbl&gt; 64.30191, 70.65430, 73.66114, 86.14630, 59.81595, 83.60510, 8…</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> timer, <span class="at">y =</span> resultat)) <span class="sc">+</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="11_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>Vi kan se på en enkel OLS på datasettet:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>enkelOLS2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(resultat <span class="sc">~</span> timer, <span class="at">data =</span> df)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> df<span class="sc">$</span>timer, <span class="at">y =</span> df<span class="sc">$</span>resultat), <span class="at">col =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> df<span class="sc">$</span>timer, <span class="at">y =</span> <span class="fu">predict</span>(enkelOLS2, <span class="at">newdata =</span> df)), <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">&quot;Enkel OLS&quot;</span>) <span class="sc">+</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">&quot;timer&quot;</span>) <span class="sc">+</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">&quot;resultat&quot;</span>)</span></code></pre></div>
<p><img src="11_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>Neste steg er å lage 5 modeller (kan selvsagt lage x antall modeller).</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Stokker om dataene tilfeldig</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>df.shuffled <span class="ot">&lt;-</span> df[<span class="fu">sample</span>(<span class="fu">nrow</span>(df)),]</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Setter antall &quot;folds&quot; som skal brukes i &quot;k-fold cross-validation&quot;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>K <span class="ot">&lt;-</span> <span class="dv">10</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Definerer antall polynomfunksjoner</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>degree <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Lager k antall like store &quot;folds&quot;</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>folds <span class="ot">&lt;-</span> <span class="fu">cut</span>(<span class="fu">seq</span>(<span class="dv">1</span>,<span class="fu">nrow</span>(df.shuffled)),<span class="at">breaks=</span>K,<span class="at">labels=</span><span class="cn">FALSE</span>)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Lager matrise som skal fylles med MSE for de 5 modellene</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>mse <span class="ot">=</span> <span class="fu">matrix</span>(<span class="at">data=</span><span class="cn">NA</span>,<span class="at">nrow=</span>K,<span class="at">ncol=</span>degree)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Gjennomfører &quot;K-fold cross validation&quot;</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>K){</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Deler opp i treningsdata og testdata</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    testIndexes <span class="ot">&lt;-</span> <span class="fu">which</span>(folds<span class="sc">==</span>i,<span class="at">arr.ind=</span><span class="cn">TRUE</span>)</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    testData <span class="ot">&lt;-</span> df.shuffled[testIndexes, ]</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    trainData <span class="ot">&lt;-</span> df.shuffled[<span class="sc">-</span>testIndexes, ]</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Evaluerer modellene gjennom &quot;k-fold cv&quot; </span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>degree){</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>        fit.train <span class="ot">=</span> <span class="fu">lm</span>(resultat <span class="sc">~</span> <span class="fu">poly</span>(timer,j), <span class="at">data=</span>trainData)</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>        fit.test <span class="ot">=</span> <span class="fu">predict</span>(fit.train, <span class="at">newdata=</span>testData)</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>        mse[i,j] <span class="ot">=</span> <span class="fu">mean</span>((fit.test<span class="sc">-</span> testData<span class="sc">$</span>resultat)<span class="sc">^</span><span class="dv">2</span>) </span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a><span class="fu">colMeans</span>(mse)</span></code></pre></div>
<pre><code>## [1]  9.886172  8.589655  9.439514 10.214915 12.745574</code></pre>
<p>Modell 2 ser ut til å ha lavest MSE.</p>
<p>Vi kan til slutt visualisere valgt modell og se på modellens parametere.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x=</span>timer, <span class="at">y=</span>resultat)) <span class="sc">+</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>          <span class="fu">geom_point</span>(<span class="at">col =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>          <span class="fu">stat_smooth</span>(<span class="at">method=</span><span class="st">&#39;lm&#39;</span>, <span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">poly</span>(x,<span class="dv">2</span>), <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">xlab</span>(<span class="st">&#39;timer&#39;</span>) <span class="sc">+</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ylab</span>(<span class="st">&#39;resultat&#39;</span>)</span></code></pre></div>
<p><img src="11_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>bestemodell <span class="ot">&lt;-</span> <span class="fu">lm</span>(resultat <span class="sc">~</span> <span class="fu">poly</span>(timer,<span class="dv">2</span>, <span class="at">raw=</span>T), <span class="at">data=</span>df)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(bestemodell)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = resultat ~ poly(timer, 2, raw = T), data = df)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -5.6589 -2.0770 -0.4599  2.5923  4.5122 
## 
## Coefficients:
##                          Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)              54.00526    5.52855   9.768 6.78e-13 ***
## poly(timer, 2, raw = T)1 -0.07904    1.15413  -0.068  0.94569    
## poly(timer, 2, raw = T)2  0.18596    0.05724   3.249  0.00214 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 2.8 on 47 degrees of freedom
## Multiple R-squared:   0.93,  Adjusted R-squared:  0.927 
## F-statistic: 312.1 on 2 and 47 DF,  p-value: &lt; 2.2e-16</code></pre>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-zachPolynomialRegressionStepbyStep2019" class="csl-entry">
Zach. 2019. <span>“Polynomial <span>Regression</span> in <span>R</span> (<span class="nocase">Step-by-Step</span>).”</span> <em>Statology</em>.
</div>
</div>
</div>
</div>
<!--bookdown:body:end-->
  </main>

  <div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page">
      <h2>On this page</h2>
      <div id="book-on-this-page"></div>

      <div class="book-extra">
        <ul class="list-unstyled">
          <li><a id="book-source" href="#">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="#">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
  </div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5">
  <div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong></strong>" was written by . </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
<script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>

</html>
